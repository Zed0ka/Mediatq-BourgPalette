<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Page d'accueil</title>
</head>
<body>
<!--     <div id="h1div"> -->
        <h1>
            Mediathèque du Bourg Palette
        </h1>
<!--     </div> -->
    <h2>
        Infos
    </h2>
    <main>
        <section id="infos">
            <div id="news">
                <h3>
                    Actualités de votre médiathèque
                </h3>
                <p>
                    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Distinctio, voluptates eveniet facere alias corporis consequuntur porro quasi eaque. Minus molestias, necessitatibus fugit tenetur commodi aperiam ex architecto assumenda et reiciendis.
                    Provident qui rerum aliquam minus distinctio natus eius, voluptates illum est sunt dicta ipsa, doloremque nostrum eaque iure consequuntur quidem ea reiciendis veniam excepturi officia, velit animi! Fugiat, voluptate dignissimos?
                </p>
            </div>
            <div id="contact">
                <h3>
                    Nous contacter
                </h3>
                <p>
                    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Distinctio, voluptates eveniet facere alias corporis consequuntur porro quasi eaque. Minus molestias, necessitatibus fugit tenetur commodi aperiam ex architecto assumenda et reiciendis.
                    Provident qui rerum aliquam minus distinctio natus eius, voluptates illum est sunt dicta ipsa, doloremque nostrum eaque iure consequuntur quidem ea reiciendis veniam excepturi officia, velit animi! Fugiat, voluptate dignissimos?
                </p>
            </div>
            <div id="how">
                <h3>
                    Comment çà marche
                </h3>
                <p>
                    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Distinctio, voluptates eveniet facere alias corporis consequuntur porro quasi eaque. Minus molestias, necessitatibus fugit tenetur commodi aperiam ex architecto assumenda et reiciendis.
                    Provident qui rerum aliquam minus distinctio natus eius, voluptates illum est sunt dicta ipsa, doloremque nostrum eaque iure consequuntur quidem ea reiciendis veniam excepturi officia, velit animi! Fugiat, voluptate dignissimos?
                </p>
            </div>
        </section>
        <section>
            <h2>
                Les derniers ajouts
            </h2>
            <div class="lastAddedBooks">
            </div>
        </section>
    </main>
    <aside class="searchInfos">
        <h3>
            Rechercher...
        </h3>
        <div class="searchBar">
            <form action="searchBook.js" method="get">
                <input type="text" name="search_input" id="search_input" placeholder="Titre du livre...">
                <br>
                <button type="submit" name="search_btn" id="search_btn">
                    Go!
                </button>
            </form>
        </div>
        <br>
        <nav id="searchNav">
            <h3>
                Afficher tout...
            </h3>
            <ol>
                <li><button>
                    Par langues
                </button></li>
                <li><button>
                    Par genre
                </button></li>
                <li><button>
                    Par auteur
                </button></li>
            </ol>
        </nav>
    </aside>
<script>
    const getAllBooks = new Worker("WWgetAllBooks.js");
    // récup la div où créer les cards
    const lastAddedBooks = document.querySelector(".lastAddedBooks");
    // quand je reçois le message du WW
    getAllBooks.onmessage = (e)=>{
        const allBooks = e.data;
        allBooks.forEach(book => {

            const bookCard = document.createElement("div");
            bookCard.classList.add("bookCard");
            lastAddedBooks.appendChild(bookCard);

            const bookTitle = document.createElement("h3");  
            bookTitle.classList.add("bookTitle");
            bookTitle.innerText = `${book["titre"]}`;
            bookCard.appendChild(bookTitle);
            
            const bookLang = document.createElement("p");
            bookLang.classList.add("bookLang");
            bookLang.innerText = `${book["langue"]}`;
            bookCard.appendChild(bookLang);

            const bookAuth = document.createElement("p");
            bookAuth.classList.add("bookAuth");
            bookAuth.innerText = `${book["auteur"]}`;
            bookCard.appendChild(bookAuth);

            const bookGenre = document.createElement("p");
            bookGenre.classList.add("bookGenre");
            bookGenre.innerText = `${book["genre"]}`;
            bookCard.appendChild(bookGenre);

            const reservBtn = document.createElement("button");
            reservBtn.classList.add("reservBtn");
            reservBtn.innerText = `Réserver`;
            bookCard.appendChild(reservBtn);
        });
    }

    reservBtn.addeventlistener("click",()=>{
        bookCard.classList.toggle("modalOpen");
    })

/**          
    * todo: DRY optimiser en créant fct° "bookDisplay(bkName,bkElement,info)" 
    * ! ICI : "bkElement"= "h3", "bkName" ="bookTitle", "bkInfo" = "titre"
    * *bookInfo("bookTitle","h3",book["titre"]);
    * *bookInfo("bookLang","p",book["langue"]);
    * *bookInfo("bookAuth","p",book["auteur"]);
    * *bookInfo("bookGenre","p",book["genre"]);
    * *bookInfo("reservBtn","button","Réserver"); 
*/

/**    
    * function bookInfo(bkName,bkElement,bkInfo) {
    * bkName = document.createElement(`${bkElement}`);
    * bkName.classList.add(`${bkInfo}`);
    * bkName.innerText = `${bkName}`;
    * lastAddedBooks.appendChild(bkName);
    * } 
*/
    

</script>
</body>
</html>